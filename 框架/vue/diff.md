### vue3 中 如何判断 vnode节点是否相同的？

在 Vue 3 中，判断两个虚拟节点（VNode）是否相同主要是通过比较它们的 `type`、`key`、`props` 以及其他属性来实现的。Vue 3 的 diff 算法在 `render` 函数执行过程中自动进行，用于确定新旧节点之间的差异并最小化 DOM 操作。具体到手动判断两个 VNode 是否相同，可以从以下几个方面进行比较：

1. **类型检查** (`type`)：首先检查两个 VNode 的类型是否一致。类型可以是 HTML 标签名、组件的选项对象或者是一些特殊的符号（如文本节点）。如果类型不同，则认为节点不同。

2. **Key 值**：如果 VNode 有 `key` 属性，比较它们的 `key` 是否相同。`key` 用于在列表渲染中追踪节点的身份，具有相同 `key` 的节点被认为是同一个身份的节点，即使它们的内容发生了变化。

3. **Props 和 Attributes**：如果类型和 key 相同，进一步比较它们的属性（`props`）是否一致。这包括事件监听器、普通属性等。Vue 3 使用 `shapeFlag` 来标识 VNode 的类型，这有助于快速确定哪些属性需要比较。

4. **子节点**：如果 VNode 包含子节点，递归地对子节点进行同样的比较。在数组的情况下，Vue 会使用算法（如双指针法）来高效地对比新旧子节点列表。

5. **文本内容**：对于纯文本节点，比较它们的文本内容是否相同。

6. **特殊属性**：还有一些特殊的属性，比如 `slot`、`ref` 等，也需要根据情况考虑是否需要比较。

在实际应用中，Vue 3 内部已经实现了这些比较逻辑，开发者通常不需要直接进行 VNode 的比较。但如果你确实需要在自定义逻辑中进行这样的判断，可以参考 Vue 的源码中关于 diff 算法的部分，特别是与 `patch` 函数相关的部分，来实现类似的功能。