[聊聊前端字符编码：ASCII、Unicode、Base64、UTF-8、UTF-16、UTF-32](https://www.51cto.com/article/745100.html)

JavaScript 编解码

URL 只能包含标准的 ASCII 字符，所以必须对其他特殊字符进行编码。在 JavaScript 中，可以通过了以下方法对 URL 来做 UTF-8 编码与解码：

encodeURI​、decodeURI
encodeURIComponent​、decodeURIComponent
这里的编码指的就是将二进制数据转换为 ASCII 格式的方式，解码反之亦然，即将 ASCII 格式转换回原始内容。

那 encodeURI​ 和 encodeURIComponent 有什么区别呢？

encodeURI 用于编码完整的 URL：

需要注意，有 11 个字符不能使用 encodeURI​ 编码，而需要使用 encodeURIComponent 进行编码：#$&+,:;=?@

需要注意，encodeURIComponent​ 不编码 - _ . ! ~ * ' ( )。如果要对这些字符进行编码，则必须将它们替换为相应的 UTF-8 字符序列：


`encodeURI`和`encodeURIComponent`是JavaScript中用于编码URL的两个函数，它们的主要区别在于编码的范围和目的，使用时应根据具体场景来选择：

1. **encodeURI**：
   - **用途**：主要用于对整个URI（包括协议、主机名、路径等）进行编码，但不会对URI中已编码的部分再次编码，也不会编码URI保留字符（如：:/?#[]@!$&'()*+,;=）。
   - **适用场景**：当你需要编码整个URL，但希望保留URI结构中的特殊字符（如用于分隔路径和查询参数的字符）时使用。例如，当你构建一个完整的URL准备赋值给`window.location.href`时。

2. **encodeURIComponent**：
   - **用途**：用于对URI组件中的某个部分进行编码，特别是对查询字符串参数值进行编码。它会对除了`- _ . ! ~ * ' ( )`之外的所有字符进行编码，确保这些字符在作为URI组件一部分时不会引起解析问题。
   - **适用场景**：当你需要编码URL中的一部分，尤其是用户提供的输入数据（如表单数据、搜索关键词等），以防止特殊字符干扰URI的正确解析时使用。例如，构建GET请求的查询字符串参数时。

**总结**：
- 如果你需要编码整个网址（包括协议和域名），并且不想破坏URI本身的结构，使用`encodeURI`。
- 如果你只是需要编码URL中的某个特定部分，比如查询字符串的值，以确保它们适合作为URI组件，使用`encodeURIComponent`。

正确的使用这两个函数可以确保你的应用程序生成的URL能够被各种服务器和客户端正确解析，避免因特殊字符引起的错误或安全漏洞。

#### 为什么我们的html 都是 utf-8编码的？

HTML文档使用UTF-8编码的原因主要有以下几点：

1. **国际化**：
   UTF-8是一种支持全球所有语言文字的字符编码标准，它能够表示Unicode字符集中所有的字符。这意味着使用UTF-8编码的HTML文档可以包含世界上任何语言的文字，这对于全球化和多语言网站来说至关重要。

2. **向后兼容性**：
   UTF-8编码在处理ASCII字符时，与ASCII编码完全相同。也就是说，对于只包含英文和一些基本符号的文本，UTF-8编码不会增加额外的字节数，这使得它在向后兼容性方面表现优异，旧有的纯英文文本无需转换即可在UTF-8编码的环境中使用。

3. **效率**：
   UTF-8使用可变长度编码，对于常见的拉丁字母、数字和标点符号，UTF-8只需要一个字节，而对于其他语言的字符，UTF-8可以使用最多四个字节来表示。这种可变长度的特性使得UTF-8在处理多种语言混合的文本时既节省空间又高效。

4. **广泛支持**：
   大多数现代的Web浏览器、服务器、数据库系统、文本编辑器和编程语言都支持UTF-8编码。这使得在Web开发中使用UTF-8编码变得极其便利，因为不必担心不同系统之间的编码转换问题。

5. **标准推荐**：
   W3C和WHATWG的HTML标准推荐使用UTF-8作为HTML文档的字符编码。这意味着遵循Web标准的开发者应当使用UTF-8，以确保文档的正确解析和展示。

6. **简化开发**：
   使用统一的UTF-8编码可以简化Web开发流程，避免在处理多语言内容时出现乱码问题。开发者不需要关心特定语言的编码细节，只需专注于内容的创建和呈现。

7. **安全性**：
   UTF-8编码有助于防止一些由编码不一致引发的安全问题，如跨站脚本（XSS）攻击。当Web应用明确声明使用UTF-8编码时，可以更安全地处理和输出用户提交的数据。

综上所述，使用UTF-8编码的HTML文档可以更好地适应全球化的需求，提高开发效率，减少错误，并且与Web标准保持一致。因此，UTF-8成为了现代Web开发中HTML文档的首选编码方式。