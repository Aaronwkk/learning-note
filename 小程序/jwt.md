JWT，全称JSON Web Token，是一种开放标准（RFC 7519），用于安全地在双方之间传递信息。这个信息可以验证和确认用户的身份，同时也可以包含用户的角色权限等声明信息。JWT的设计允许它在各方之间安全、高效地进行传输，特别适合于分布式站点的单点登录（Single Sign-On, SSO）、API认证等场景。JWT主要由三部分组成：头部（Header）、载荷（Payload）和签名（Signature），它们之间通过`.`分隔，并使用Base64Url编码连接在一起。

### JWT的组成部分

#### 1. 头部（Header）
头部通常包含两部分信息：使用的签名算法（如HMAC SHA256或RSA）和令牌的类型（即JWT）。例如：
```json
{
  "alg": "HS256",
  "typ": "JWT"
}
```
这部分会被Base64Url编码形成JWT的第一部分。

#### 2. 载荷（Payload）
载荷是JWT的核心内容，它包含了一系列声明（claims），这些声明可以是公开的，也可以是私有的，具体取决于应用场景。声明通常包含用户的身份信息、过期时间、发行者等。例如：
```json
{
  "sub": "1234567890",
  "name": "John Doe",
  "iat": 1516239022,
  "exp": 1516239022 + 60 * 60, // 一小时后过期
  "iss": "https://example.com"
}
```
这部分也会被Base64Url编码，形成JWT的第二部分。

#### 3. 签名（Signature）
签名是JWT的第三部分，它是将前面两部分（头部和载荷）分别Base64Url编码后，使用头部指定的算法和一个密钥（只有服务器知道）进行加密计算得到的。签名确保了JWT没有被篡改，因为任何对头部或载荷的改动都会导致签名失效。其计算公式大致如下：
```plaintext
HMACSHA256(
  base64UrlEncode(header) + "." +
  base64UrlEncode(payload),
  secret
)
```

### JWT的工作流程

1. **认证**：用户通过用户名和密码向服务器验证身份。
2. **服务器签发JWT**：验证成功后，服务器会创建一个JWT，其中包含用户的相关信息和一个过期时间等，并使用密钥对JWT进行签名。
3. **客户端存储JWT**：客户端收到JWT后，可以储存在Cookie、LocalStorage或SessionStorage中。
4. **客户端携带JWT访问资源**：每次客户端向服务器请求受保护的资源时，都需要在HTTP请求的Authorization头部中附带JWT。
5. **服务器验证JWT**：服务器收到请求后，使用相同的密钥验证JWT的有效性（包括签名是否正确、是否过期等），从而决定是否允许客户端访问资源。

JWT的优势在于它的无状态性，服务器无需存储任何会话信息，这减少了服务器的负担，也方便了分布式系统的部署。但同时也需要注意JWT的安全问题，比如保护好密钥、设置合理的过期时间等。