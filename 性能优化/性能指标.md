

#### 什么是 CLS？

CLS 用于衡量在网页的整个生命周期内发生的每次意外布局偏移的最大突发布局偏移分数。

每当可见元素的位置从渲染的帧更改为下一帧时，都会发生布局偏移。（本指南稍后会详细介绍如何计算各项布局偏移得分。）

当页面发生布局偏移时，会打开一个会话窗口。该窗口最长可以持续5秒，但如果在初始偏移后的1秒内没有连续的布局偏移发生，窗口会提前关闭。
布局偏移然后在会话窗口内进行汇总。给定页面的最终CLS分数是具有最大总分数的会话窗口的分数 - 其他会话窗口不会影响我们的CLS。
举个例子：

页面开始渲染。
1秒后，发生了一个0.1的布局偏移。
0.5秒后，另一个0.2的偏移发生。
两秒后，发生了一个0.25的偏移，然后页面关闭。
前两个布局偏移发生在同一个会话窗口内，因此我们将它们的分数相加。

第三个布局偏移发生在2秒后（此时，第三个布局偏移和前两个被分在两个不同的会话窗口中），因此它属于一个单独的会话窗口。前一个会话窗口在第二个布局偏移后的1秒后关闭。
因此，在这种情况下，页面的最终CLS分数将为0.1 + 0.2 = 0.3（0.3>0.25）！第三个布局偏移不影响最终分数。

CLS会忽略在用户输入后的0.5秒内出现的所有布局偏移。这被称为输入排除窗口（input exclusion window）。这意味着在用户与网站进行交互后的500毫秒内，CLS测量会停止。

如何优化

排除主要图片的懒加载
通过懒加载，我们可以优化页面的加载并减少启动时的负担。然而，主要图片可能不适合懒加载，特别是如果它在视窗顶部明显显示，因为这种技术可能不是这些元素的最佳解决方案。

使用CSS进行动画
动画可能导致布局偏移，但并非所有动画都会计入CLS分数。chrome忽略CSS变换（transform）的变化 - 因此，如果我们的动画使用CSS的变换属性，它不会影响我们的CLS。

使用CDN
内容分发网络（CDN）是一组地理分布的服务器，可以缓存内容并协同工作以减少响应用户请求所需的时间。服务器响应时间过慢可能导致布局偏移，因此对某些资源使用CDN可能有助于防止页面上的高CLS。

硬编码菜单和页眉
硬编码页眉和菜单元素可以导致页面布局更一致和稳定，因为页眉和菜单的位置和外观始终保持相同。


使用font-display: swap;：这将在字体加载完成之前显示备用字体，然后在字体加载完成后再切换为所需的字体。

硬编码页眉和菜单元素可以导致页面布局更一致和稳定，因为页眉和菜单的位置和外观始终保持相同。

为广告预留空间
使用CSS的<div>标签为静态广告预留适当的空间。
如果广告槽接受多个尺寸，请为最大或最小尺寸预留空间。

[浏览器之性能指标-CLS](https://juejin.cn/post/7256730001805344827?from=search-suggest#heading-22)

#### TTI

#### 浏览器之性能指标-LCP

LCP是网站呈现包含最大数量内容的元素所需的时间。

如果想了解此页面的LCP，我们需要测量主要部分加载所需的时间。理论上，如果我们网站的LCP得分较低，这意味着我们的网站运行流畅，并且给用户德芙般的使用体验



[详细介绍各种指标，文档](https://web.dev/articles/cls?hl=zh-cn)

[火山引擎 性能指标](https://www.volcengine.com/docs/6431/107451)